<!DOCTYPE html>
<html>

  <head>
  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  
  <title>Cloudant Spring Boot Auto-Configuration</title>
  <meta name="description" content="Spring Boot auto-configuration binding for Cloudant:https://github.com/icha024/cloudant-spring-boot-starter">

  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width initial-scale=1">

  <link rel="shortcut icon" href="">


  
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:400,700,400italic,700italic|Open+Sans:400italic,700italic,700,400">
  <link rel="stylesheet" href="/css/screen.css">

  
  <link rel="canonical" href="/2016/01/25/cloudant-config/">
  <link rel="alternate" type="application/atom+xml" title="Clianz: Tech and stuff from NZ" href="/feed.xml" />

  <script type="text/javascript" src="/assets/javascripts/jquery-2.1.4.min.js"></script>
</head>


  <body class="">

    

<article role="main" class="">
    <header>
      <a href="/" id="home_link">«</a>
      <div class="meta"><time datetime="2016-01-25"><a href="/2016/01/25/cloudant-config/">January 25, 2016</a></time>
        <span class="count" id="js-reading-time">&nbsp;</span>
      </div>
      <h1>Cloudant Spring Boot Auto-Configuration</h1>
    </header>

    <div class="text" id="js-post-content">
        <p>Spring Boot auto-configuration binding for Cloudant:</p>

<p><a href="https://github.com/icha024/cloudant-spring-boot-starter">https://github.com/icha024/cloudant-spring-boot-starter</a>
<!--more--></p>

<h1 id="usage">Usage</h1>

<h2 id="injecting-cloudant-client">Injecting Cloudant client</h2>

<p>Just inject the client:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nd">@Autowired</span>
<span class="n">CloudantClient</span> <span class="n">cloudant</span>
</code></pre>
</div>

<p>Then start using it:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">Database</span> <span class="n">db</span> <span class="o">=</span> <span class="n">cloudant</span><span class="o">.</span><span class="na">database</span><span class="o">(</span><span class="s">"mydb"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
<span class="n">db</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
</code></pre>
</div>

<h2 id="injecting-database-directly">Injecting database directly</h2>

<p>Or alternatively, you may inject a DB directly:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">Database</span> <span class="nf">mydb</span><span class="p">(</span><span class="n">CloudantClient</span> <span class="n">cloudant</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">cloudant</span><span class="o">.</span><span class="na">database</span><span class="o">(</span><span class="s">"mydb"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Then start using it:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nd">@Autowired</span>
<span class="n">Database</span> <span class="n">mydb</span>

<span class="n">mydb</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
</code></pre>
</div>

<h1 id="installing-with-maven">Installing with Maven</h1>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.clianz<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>cloudant-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>0.9.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre>
</div>

<h1 id="configuration">Configuration</h1>

<h2 id="spring-boot-configuration">Spring Boot Configuration</h2>

<p>Configurations can be placed in the application.properties (or yml, or json) as usual. The username and password is mandatory.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">##### Mandatory configs #####
</span><span class="py">cloudant.username</span><span class="p">=</span><span class="s">myUserName     #Username as assigned by Cloudant.</span>
<span class="py">cloudant.password</span><span class="p">=</span><span class="s">myPasswd       #Password as assigned by Cloudant.</span>

<span class="c">##### Optional configs #####
</span><span class="py">cloudant.account</span><span class="p">=</span><span class="s">myAccountName   #Defaults to username if left blank.</span>
<span class="py">cloudant.url</span><span class="p">=</span><span class="s">...                 #Defaults to official server.</span>
<span class="py">cloudant.proxyURL</span><span class="p">=</span><span class="s">...            #URL to proxy server</span>
<span class="py">cloudant.proxyUser</span><span class="p">=</span><span class="s">myUserName    #Proxy username</span>
<span class="py">cloudant.proxyPassword</span><span class="p">=</span><span class="s">myPasswd  #Proxy password.</span>
<span class="py">cloudant.connectTimeout</span><span class="p">=</span><span class="s">300      #Connect timeout in seconds. Default to 300 seconds (5 minutes).</span>
<span class="py">cloudant.readTimeout</span><span class="p">=</span><span class="s">300         #Read timeout in seconds. Default to 300 seconds (5 minutes).</span>
<span class="py">cloudant.maxConnections</span><span class="p">=</span><span class="s">6        #Default to 6.</span>
<span class="py">cloudant.disableSSLAuthentication</span><span class="p">=</span><span class="s">false   #Defaults to false.</span>
</code></pre>
</div>

<h2 id="bluemix-cloudfoundry-configuration">Bluemix (CloudFoundry) Configuration</h2>

<p>When using Bluemix (CloudFoundry), the client will automatically use the Cloudant service binded to the app instead of the Spring configuration.</p>

<p>Bluemix’s VCAP_SERVICES environment variable containing a Cloudant service will always take precedence over any Spring configuration. This is useful – Local development will use the Spring configuration properties, and promoting it to Bluemix will automatically use the environment configured instance. If Spring’s configuration is desired, just remove the Cloudant service binding from your Bluemix app.</p>

    </div>

    <menu>
      <a href="" id="btn_share" class="btn" title="Share">
        <span aria-hidden="true" data-icon="S"></span>
        <strong>Share</strong>
      </a>
      <a href="http://twitter.com/share?text=Cloudant+Spring+Boot+Auto-Configuration&url=/2016/01/25/cloudant-config/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" id="btn_comment" class="btn" target="_blank">
        <span aria-hidden="true" data-icon="C"></span> Comment on Twitter
      </a>
    </menu>
</article>

<footer role="contentinfo" class='post-footer'>
    <div class="inner">
        <div class="vcard">
            <a href="/feed.xml" id="btn_feed" class="btn" title="Feed" target="_blank">
                <span aria-hidden="true" data-icon=")"></span>
                <strong>Feed</strong>
            </a>

            

            <div class="details">
                <h4><a href="" class="url n">Clianz: Tech and stuff from NZ</a></h4>
                <a href="" class="js-remove-domain-schema"></a><br>
            </div>
        </div>
        <div id="user_bio">
            <div class="inner">
                Thoughts exploration on software, hardware, and all things in technology.

            </div>
        </div>
    </div>
</footer>

<div id="share_modal">
    <div class="wrap">
        <div class="inner">
            <header>
                Share
                <a href="" class="close" title="Close">&times;</a>
            </header>

            <div class="roon-share-links">
                <a href="https://twitter.com/share" class="twitter-share-button" data-dnt="true">Tweet</a>
                <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

                <div id="fb-elems">
                    <div id="fb-root"></div>
                    <script>(function(d, s, id) {
                    var js, fjs = d.getElementsByTagName(s)[0];
                    if (d.getElementById(id)) return;
                    js = d.createElement(s); js.id = id;
                    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=463438580397968";
                    fjs.parentNode.insertBefore(js, fjs);
                    }(document, 'script', 'facebook-jssdk'));</script>
                    <div class="fb-like" data-send="false" data-layout="button_count" data-width="110" data-show-faces="false" data-font="arial"></div>
                </div>

                <div id="pinit-btn">
                    <a href="//pinterest.com/pin/create/button/?url=/2016/01/25/cloudant-config/&amp;description=Cloudant Spring Boot Auto-Configuration-Clianz: Tech and stuff from NZ " data-pin-do="buttonPin" data-pin-config="beside"><img src="//assets.pinterest.com/images/pidgets/pin_it_button.png"></a>
                    <script type="text/javascript" src="//assets.pinterest.com/js/pinit.js"></script>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
window.onload = function () {
  reading_time();
}
function get_text(el) {
  ret = "";
  var length = el.childNodes.length;
  for(var i = 0; i < length; i++) {
    var node = el.childNodes[i];
    if(node.nodeType != 8) {
      ret += node.nodeType != 1 ? node.nodeValue : get_text(node);
    }
  }
  return ret;
}
function reading_time () {
  var post_content = document.getElementById('js-post-content');
  if (post_content) {
    var words = get_text(post_content),
      count = words.split(/\s+/).length,
    read_time = Math.ceil((count / 150)),
        read_time_node = document.createTextNode(read_time + ' min read');
    document.getElementById('js-reading-time').appendChild(read_time_node);
  }
}
$(function(){
  var share_modal = $("#share_modal"),
  update_social_links = true;

  $("#btn_share").click(function(){
    var that = $(this);
    share_modal.fadeIn(200);
    return false;
  });

  share_modal.click(function(e){
    if (e.target.className == "wrap" || e.target.id == "share_modal") {
      share_modal.fadeOut(200);
    }
    return false;
  });

  share_modal.find("div.inner > header > a.close").click(function(){
    share_modal.fadeOut(200);
    return false;
  });
});
</script>


    <!--
    
    <a href="" id="blog_badge">
            <span style="background-image:
            url('/assets/images/');"></span>
        </a>
    
    -->

    <script>
      function no_schema_links () {
        var links = document.querySelectorAll('.js-remove-domain-schema');
        if (links) {
          for (i = 0; i < links.length; ++i) {
            var link = links[i],
              text = link.innerHTML,
            no_schema = text.replace(/.*?:\/\//g, "");
            link.innerHTML = no_schema;
          }
        }
      }

      window.onload = function () {
        no_schema_links();
      }
    </script>
  </body>

</html>
